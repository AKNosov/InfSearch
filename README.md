## 1. О проекте
Проект — система информационного поиска по собранному корпусу статей:

- **Python робот (crawler)** собирает документы и метаданные и хранит их в **MongoDB**.
- **C++ поисковый движок (engine)** читает корпус из MongoDB, строит **булев инвертированный индекс** (терм → список docId) на собственной хеш‑таблице и выполняет **булев поиск** (AND/OR/NOT + скобки).
- **Python скрипты анализа** (например, закон Ципфа) строят статистику по термам/частотам.
- Гугл диск с копией оригианльного корпуса документов - https://drive.google.com/drive/folders/12kmarbw8LzpsjQn4KfKwM2wCCRxjZQby

---

## 2. Требования

### Минимальные
- ОС: Linux / macOS / Windows 10+ (рекомендуется WSL2 для Windows)
- Docker Engine **24+**
- Docker Compose plugin **v2.20+**
- RAM: **минимум 4 ГБ**, рекомендуется **8+ ГБ** (индекс строится в памяти)
- Диск: от **2–5 ГБ** (MongoDB volume + логи + образы)

### Для локального запуска скриптов анализа (опционально)
- Python **3.10+**
- `pip install pymongo matplotlib`
---

## 3. Запуск (Docker Compose)


### Шаг 1. Запуск MongoDB и робота (сбор корпуса)
Из директории с `docker-compose.yml`:

```bash
docker compose up --build -d mongo robot
```

Проверить, что документы копятся в Mongo:
```bash
docker compose exec mongo mongosh
```

В `mongosh`:
```js
use crawler
db.pages.countDocuments()
db.queue.countDocuments()
```

Корпус считается “собранным”, когда `db.pages.countDocuments()` достиг нужного объёма (например, 20000+ на источник или требуемого по заданию).

---

### Шаг 2. Остановка робота (фиксируем корпус)
Когда корпус набран, остановите робота:

```bash
docker compose stop robot
```

MongoDB **не останавливаем** (она нужна поиску).

---

### Шаг 3. Запуск поискового движка (C++)
Запускаем движок как отдельный процесс поверх MongoDB.

```bash
docker compose run --rm engine ./engine mongodb://mongo:27017 crawler pages
```

После старта движок:
- загрузит документы из MongoDB,
- построит индекс,
- откроет консоль для ввода запросов.

---

## 4. Использование булевого поиска

Поддерживаемый синтаксис:
- Операторы: `AND`, `OR`, `NOT`
- Скобки: `(...)`
- Неявный `AND` между словами: `нефть газ` == `нефть AND газ`

Примеры запросов:
- `нефть AND газ`
- `(нефть OR газ) AND NOT европа`
- `NOT украина AND переговоры`

Результат: список URL (первые N ссылок, остальное — счётчик).

---


## 5. Важные замечания
- Движок строит индекс **в памяти** при запуске. Чем больше документов — тем больше RAM требуется.
- Для корректности поиска **индексация и разбор запросов** используют один и тот же пайплайн:
  `Tokenizer -> Stemmer`.
- Если `pages` перестал расти, часто причина в расписании `next_fetch_at` или в том, что главная/рубрики вытесняют статьи — проверьте `queue.state`, `next_fetch_at`, `priority`.

---





